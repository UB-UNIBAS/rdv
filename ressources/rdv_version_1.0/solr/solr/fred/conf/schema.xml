<?xml version="1.0" encoding="UTF-8" ?>
<schema name="fred" version="1.5">
    <types>

        <!-- integer -->
        <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>

        <!-- long fuer Versionierung -->
        <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>

        <!-- String mit Umlautersetzung -->
        <fieldtype name="string" class="solr.TextField" positionIncrementGap="100">
            <analyzer type="index">

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <tokenizer class="solr.KeywordTokenizerFactory"/>
                <filter class="solr.ICUFoldingFilterFactory"/>
            </analyzer>
            <analyzer type="query">

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <tokenizer class="solr.KeywordTokenizerFactory"/>
                <filter class="solr.ICUFoldingFilterFactory"/>
            </analyzer>
        </fieldtype>

        <!-- String fuer Facettierung -->
        <fieldtype name="facet" class="solr.StrField" positionIncrementGap="100" />

        <!-- Ermoeglicht rechtstrunkierte Suche. z.B. bei Expertensuche Person -->
        <fieldType name="edgy" class="solr.TextField" positionIncrementGap="100">
            <analyzer type="index">
                <tokenizer class="solr.KeywordTokenizerFactory"/>

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <filter class="solr.ICUFoldingFilterFactory"/>
                <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="25" />
            </analyzer>
            <analyzer type="query">

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <tokenizer class="solr.KeywordTokenizerFactory"/>
                <filter class="solr.ICUFoldingFilterFactory"/>
            </analyzer>
        </fieldType>

        <!-- Text: mit Umlautersetzung -->
        <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
            <analyzer type="index">

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <tokenizer class="solr.ICUTokenizerFactory"/>
                <filter class="solr.ICUFoldingFilterFactory"/>
            </analyzer>
            <analyzer type="query">

                <!-- enthaelt u-umlaut -> u, lowercase und uft8 decomposed -->
                <tokenizer class="solr.ICUTokenizerFactory"/>
                <filter class="solr.ICUFoldingFilterFactory"/>
            </analyzer>
        </fieldtype>
    </types>
    <fields>

        <!-- id: string -->
        <field name="id" type="string" required="true" />

        <!-- Freitxetsuche aus mehreren Einzelfeldern -->
        <field name="all_text" type="text" multiValued="true" />

        <!-- Alles String-Felder ins all_text Feld kopieren -->
        <copyField source="*_all_string" dest="all_text"/>

        <!-- Alles Text-Felder ins all_text Feld kopieren -->
        <copyField source="*_all_text" dest="all_text"/>

        <!-- dynamic field: String-feld -->
        <dynamicField name="*_all_string" type="string" multiValued="true" />

        <!-- dynamic field: String-feld -->
        <dynamicField name="*_string" type="string" />

        <!-- dynamic field: Facet-Feld -->
        <dynamicField name="*_all_facet" type="facet" multiValued="true" />

        <!-- dynamic field: Text-Feld -->
        <dynamicField name="*_text" type="text" multiValued="false" />

        <!-- dynamic field: Text-Feld -->
        <dynamicField name="*_all_text" type="text" multiValued="true" />

        <!-- dynamic field: edgy -->
        <dynamicField name="*_all_edgy" type="edgy" multiValued="true" />

        <!-- dynamic field: Int-Feld -->
        <dynamicField name="*_int" type="int" />

        <!-- Jahresinformationen in Integerfeld -->
        <field name="py_sort_string" type="int" />
        <field name="py_all_facet" type="int" />

        <!-- Versionsfeld fuer Solr 4 -->
        <field name="_version_" type="long" indexed="true" stored="true"  multiValued="false" />
    </fields>

    <!-- ID Feld -->
    <uniqueKey>id</uniqueKey>

    <!-- standardmaesig durchsuchtes Feld -->
    <defaultSearchField>all_text</defaultSearchField>

    <!-- Verknuepfungsoperator -->
    <solrQueryParser defaultOperator="AND" />
</schema>
